<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8"/>
		<title>Bookmarker</title>

		<!-- Bootstrap and JQuery -->
		<script src="/javascript/jquery.min.js"></script>
		<script src="/javascript/bootstrap.min.js"></script>
		<script src="/javascript/vue.js"></script>
		<link rel="stylesheet" href="/css/bootstrap.min.css" />
		<link rel="stylesheet" href="/css/all.css" />

		<!-- Custom CSS -->
		<link rel="stylesheet" href="/css/style.css" />
	</head>

	<body>
		<div class="p-3 container-lg" id="content-div">
			
			<!-- Top Bar, icons and edit area -->

			<div class="top-bar">

				<span class="help">
					<a :href="jsButton">
						<span class="badge badge-primary" @click="preventDefault">Save Bookmark</span>
					</a> 
					<i class="fas fa-question" v-on:click="toggleHelp"></i>
				</span>
				<div v-if="editingBookmark">
					<div class="item-form">
						<label for="bookmark-name-input">Name</label>
						<input v-model="bookmarkToEdit.name" type="text" id="bookmark-name-input" name="bookmarkName"
							v-on:click="inputClicked" />
						<label for="bookmark-category-input">Category</label>
						<input v-model="bookmarkToEdit.category" type="text" id="bookmark-category-input" name="bookmarkCategory"
							v-on:click="inputClicked" />
						<button class="btn btn-primary" v-on:click="addOrEditBookmark">Ok</button>
						<button class="btn btn-secondary" v-on:click="refreshPage">Cancel</button>
					</div>
				</div>
				<div v-else>
					<div v-if="editingCategory">
						<div class="item-form">
							<label for="category-name-input">Name</label>
							<input v-model="categoryToEdit.name" type="text" id="category-name-input" name="bookmarkName"
								v-on:click="inputClicked" />
							<button class="btn btn-primary" v-on:click="editCategory">Ok</button>
							<button class="btn btn-secondary" v-on:click="refreshPage">Cancel</button>
						</div>
					</div>
					<div v-else>
						<i class="fas fa-trash-alt" v-on:drop="dropForDelete" v-on:dragover="preventDefault"></i>
						<i class="fas fa-edit" v-on:drop="dropForEdit" v-on:dragover="preventDefault"></i>

						<div class="instructions" :class="[showHelp ? showClass : hideClass]">
							<div><small class="text-muted">
								<strong>Creating a bookmark</strong>
								<p>Drag the "Save Bookmark" button above onto your bookmarks bar. 
									Then when you're on a page you want to bookmark, click the button and give it a name and category</p>
								<strong>Editing or deleting bookmarks and categories</strong>
								<p>You can drag a category or bookmark onto the icons above to edit or delete</p>
							</small></div>
						</div>
					</div>
				</div>

			</div>
			<hr/>

			<!-- Main panel showing bookmarks -->

			<div class="main-div">
				<div v-for="(category) in categories" class="category-area">
					<span v-if="category.bookmarks.length > 0">
						<div class="category-label" draggable="true" v-on:dragstart="drag" v-bind:id="'category.' + category.id">
							<i class="fas fa-folder"></i>{{category.name}}
						</div>
						<div v-for="(bookmark) in category.bookmarks">
							<a v-bind:href="bookmark.url" class="bookmark-label" v-bind:title="bookmark.url"
								draggable="true" v-on:dragstart="drag" v-bind:id="'bookmark.' + bookmark.id">
								<span v-if="bookmark.favicon">
									<img class="bookmark-icon" :src="'data:image/png;base64,' + bookmark.favicon" />
								</span>
								<span v-else>
									<i class="fas fa-bookmark bookmark-icon"></i>
								</span>
								{{bookmark.name}}
							</a>
						</div>
					</span>
				</div>
			</div>

		</div>
		
	</body>

	<script src="/javascript/custom-vue.js"></script>

</html>